{% extends "base.html" %}

{% block title %}My Movies - Movies Interface{% endblock %}

{% block content %}
<div class="movies-header">
    <h1>My Movie Collection</h1>
    <a href="{{ url_for('add_movie') }}" class="btn btn-primary">+ Add Movie</a>
</div>

{% if movies %}
<div class="movies-grid">
    {% for movie in movies %}
    <div class="movie-card">
        {% if movie.poster_url %}
        <img src="{{ movie.poster_url }}" alt="{{ movie.title }} poster" class="movie-poster">
        {% else %}
        <div class="movie-poster-placeholder">üé¨</div>
        {% endif %}
        
        <div class="movie-info">
            <h3 class="movie-title">{{ movie.title }}</h3>
            <p class="movie-meta">{{ movie.year }} ‚Ä¢ {{ movie.genre }}</p>
            <p class="movie-director">Director: {{ movie.director }}</p>
            
            <div class="movie-rating">
                {% for i in range(movie.rating) %}‚≠ê{% endfor %}
                <span class="rating-text">{{ movie.rating }}/5</span>
            </div>
            
            {% if movie.review %}
            <p class="movie-review">"{{ movie.review }}"</p>
            {% endif %}
            
            <div class="movie-actions">
                {% if movie.imdb_link %}
                <a href="{{ movie.imdb_link }}" target="_blank" rel="noopener noreferrer" class="btn btn-imdb">IMDb</a>
                {% endif %}
                <a href="{{ url_for('edit_movie', id=movie.id) }}" class="btn btn-edit">Edit</a>
                <form method="POST" action="{{ url_for('delete_movie', id=movie.id) }}" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this movie?')">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <button type="submit" class="btn btn-delete">Delete</button>
                </form>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="empty-state">
    <p>No movies yet. Start building your collection!</p>
    <a href="{{ url_for('add_movie') }}" class="btn btn-primary">Add Your First Movie</a>
</div>
{% endif %}
{% endblock %}
